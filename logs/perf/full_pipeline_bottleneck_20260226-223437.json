{
  "perf_report": "/DATA/AppData/MCP/Jarvis/Jarvis/logs/perf/full_pipeline_perf_20260226-223437.json",
  "logs": {
    "admin_api": "/DATA/AppData/MCP/Jarvis/Jarvis/logs/perf/full_pipeline_admin_api_20260226-223437.log",
    "sql_memory": "/DATA/AppData/MCP/Jarvis/Jarvis/logs/perf/full_pipeline_sql_memory_20260226-223437.log",
    "ollama": "/DATA/AppData/MCP/Jarvis/Jarvis/logs/perf/full_pipeline_ollama_20260226-223437.log"
  },
  "legacy_dataset": {
    "path": "/DATA/AppData/MCP/Jarvis/Jarvis/memory_speicher/memory_150_rows.csv",
    "rows": 150,
    "timestamp_min": "2025-07-01T22:34:37.896643Z",
    "timestamp_max": "2025-09-14T10:34:37.896643Z",
    "actions": {
      "memory_save": 38,
      "memory_fact_save": 38,
      "tool_result": 37,
      "memory_search": 37
    }
  },
  "embedding_cpu_mode": {
    "enabled": true,
    "prepare_ok": true,
    "restore_ok": true,
    "before_policy": "cpu_only",
    "after_policy": "cpu_only",
    "before_overrides": {},
    "before_layer_routing": {
      "thinking": "auto",
      "control": "auto",
      "output": "auto",
      "tool_selector": "auto",
      "embedding": "auto"
    }
  },
  "perf_overall": {
    "runs": 4,
    "p50_e2e_ms": 8286.472,
    "p95_e2e_ms": 15114.817,
    "p50_ttft_ms": 7222.718,
    "p95_ttft_ms": 15114.817,
    "p50_tokens_per_sec": 29.07,
    "p95_tokens_per_sec": 51.155,
    "avg_prompt_tokens_est": 12.0,
    "avg_completion_tokens_est": 129.0,
    "p95_total_tokens_est": 169.8
  },
  "perf_stream": {
    "runs": 2,
    "p50_e2e_ms": 4137.643,
    "p95_e2e_ms": 4458.764,
    "p50_ttft_ms": 1720.988,
    "p95_ttft_ms": 2302.34,
    "p50_tokens_per_sec": 49.874,
    "p95_tokens_per_sec": 51.521,
    "avg_prompt_tokens_est": 12.0,
    "avg_completion_tokens_est": 120.0,
    "p95_total_tokens_est": 144.6
  },
  "pipeline_metrics": {
    "requests_total": 4,
    "thinking_layer_events": 2,
    "control_layer_events": 2,
    "control_skipped": 2,
    "output_layer_events": 4,
    "tool_execution_events": 6,
    "embedding_cpu_routes": 38,
    "embedding_gpu_routes": 0,
    "embedding_fallbacks": 0,
    "routing_fallbacks": 6,
    "errors_total_admin": 6,
    "errors_tool_not_found": 0,
    "errors_memory_fts": 0,
    "errors_decide_tools_attr": 0,
    "ollama_unload_events": 0,
    "ollama_load_events": 6
  },
  "timing_events": {
    "LAYER 1 THINKING": {
      "count": 2,
      "p50_s": 0.0,
      "p95_s": 0.0,
      "avg_s": 0.0
    },
    "LAYER 2 CONTROL": {
      "count": 2,
      "p50_s": 1.2,
      "p95_s": 1.596,
      "avg_s": 1.2
    },
    "TOOL EXECUTION": {
      "count": 2,
      "p50_s": 1.2,
      "p95_s": 1.596,
      "avg_s": 1.2
    },
    "LAYER 3 OUTPUT": {
      "count": 2,
      "p50_s": 1.425,
      "p95_s": 2.005,
      "avg_s": 1.425
    },
    "FIRST OUTPUT CHUNK": {
      "count": 2,
      "p50_s": 1.72,
      "p95_s": 2.305,
      "avg_s": 1.72
    },
    "COMPLETE": {
      "count": 2,
      "p50_s": 4.135,
      "p95_s": 4.455,
      "avg_s": 4.135
    }
  },
  "bottlenecks": [
    {
      "severity": "medium",
      "signal": "high_e2e_latency",
      "value_ms": 15114.817,
      "impact": "User-perceived latency spikes under mixed sync/stream workload."
    },
    {
      "severity": "medium",
      "signal": "high_ttft",
      "value_ms": 2302.34,
      "impact": "Slow first token on stream path; startup and retrieval/tool orchestration likely dominates."
    }
  ]
}