# Container Registry
# Definiert welche Sandbox-Container verfügbar sind
# und unter welchen Bedingungen sie gestartet werden dürfen.

containers:
  # ============================================================
  # CODE-SANDBOX: Sichere Code-Ausführung
  # ============================================================
  code-sandbox:
    description: "Isolierte Umgebung für Code-Tests und Analyse"
    image: "jarvis-code-sandbox:latest"
    build_context: "./code-sandbox"
    
    # Wann soll dieser Container genutzt werden?
    triggers:
      - "code überprüfen"
      - "code testen"
      - "code ausführen"
      - "unittest"
      - "syntax check"
      - "debuggen"
      - "python ausführen"
      - "script testen"
    
    # Sicherheitseinstellungen
    security:
      needs_confirm: false      # Safe - kein Internet
      network_mode: "none"      # Kein Netzwerk!
      read_only: false          # Braucht /tmp etc.
      max_runtime_seconds: 300  # 5 Minuten max
      
    # Ressourcen-Limits  
    resources:
      memory: "512m"
      cpus: "1.0"
      
    # Was wird gemounted?
    mounts:
      - type: "tmpfs"
        target: "/workspace"
        
  # ============================================================
  # WEB-RESEARCH: Internet-Recherche (MIT BESTÄTIGUNG!)
  # ============================================================
  web-research:
    description: "Container für Internet-Recherche"
    image: "jarvis-web-research:latest"
    build_context: "./web-research"
    
    triggers:
      - "recherchiere im internet"
      - "suche online"
      - "finde im web"
      - "google nach"
    
    security:
      needs_confirm: true       # WICHTIG: User muss bestätigen!
      network_mode: "bridge"    # Hat Internet
      read_only: true
      max_runtime_seconds: 120
      
    resources:
      memory: "256m"
      cpus: "0.5"

  # ============================================================
  # FILE-PROCESSOR: Datei-Konvertierung
  # ============================================================
  file-processor:
    description: "Dateien konvertieren und analysieren"
    image: "jarvis-file-processor:latest"
    build_context: "./file-processor"
    
    triggers:
      - "konvertiere datei"
      - "pdf zu text"
      - "bild verkleinern"
      - "datei analysieren"
    
    security:
      needs_confirm: false
      network_mode: "none"
      read_only: false
      max_runtime_seconds: 180
      
    resources:
      memory: "1g"
      cpus: "2.0"

# ============================================================
# GLOBALE EINSTELLUNGEN
# ============================================================
settings:
  # Standard-Timeout wenn nicht spezifiziert
  default_timeout: 60
  
  # Maximale gleichzeitige Container
  max_concurrent: 3
  
  # Cleanup: Container nach X Sekunden Inaktivität stoppen
  idle_timeout: 300
  
  # Logging
  log_container_output: true
